---
# yaml-language-server: $schema=https://raw.githubusercontent.com/compose-spec/compose-go/refs/tags/v2.10.0/schema/compose-spec.json
services:
  build:
    build:
      context: ./vyos-build/docker
      dockerfile: Dockerfile
    environment:
      - "GOSU_GID=1001"
      - "GOSU_UID=1001"
    networks:
      - build-amd64
    platform: linux/amd64
    privileged: true
    restart: "no"
    sysctls:
      - net.ipv6.conf.lo.disable_ipv6=0
    volumes:
      - ./vyos-build:/vyos:rw
    working_dir: /vyos
name: build-amd64
networks:
  build-amd64:
    driver: bridge
    enable_ipv6: false
    ipam:
      config:
        - gateway: 10.5.1.1
          subnet: 10.5.1.0/24
          ip_range: 10.5.1.128/25
    name: build-amd64
